---
- name: Geo blocking
  hosts: all
  connection: local
  gather_facts: false
  vars:
    ansible_host: ''
    api_id: ''
    api_key: ''
    site_id: ''
    rule_id: ''
    # Countries are currently hardcoded


  tasks:
    - name: Blocking now...
      raw: curl -ku https://"{{ansible_host}}/api/prov/v1/sites/customCertificate/upload -H content-type:application/json -X POST -d '{"include":"api_id="{{api_id}}" -d api_key="{{api_key}}" -d site_id="{{site_id}}" -d countries=CA,US,RU,ES,UK -d rule_id=api.acl.blacklisted_countries 
  